<div class="dashboard">
  <!-- Navbar -->
  <nav class="navbar">
    <div class="nav-brand">
      <span class="logo-icon">‚ö°</span>
      <span class="brand-name">TaskFlow</span>
    </div>
    <div class="nav-right">
      <span class="user-info">üë§ {{ currentUser?.name }}</span>
      <button class="btn-logout" (click)="logout()">Logout</button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <div class="page-header">
      <div>
        <h2>My Projects</h2>
        <p class="page-subtitle">{{ projects.length }} project{{ projects.length !== 1 ? 's' : '' }}</p>
      </div>
      <button class="btn-primary" (click)="showCreateModal = true">
        + New Project
      </button>
    </div>

    <!-- Loading -->
    <div class="loading-state" *ngIf="loading">
      <div class="spinner-lg"></div>
      <p>Loading projects...</p>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="!loading && projects.length === 0">
      <div class="empty-icon">üìã</div>
      <h3>No projects yet</h3>
      <p>Create your first project to get started</p>
      <button class="btn-primary" (click)="showCreateModal = true">Create Project</button>
    </div>

    <!-- Projects Grid -->
    <div class="projects-grid" *ngIf="!loading && projects.length > 0">
      <div
        class="project-card"
        *ngFor="let project of projects"
        (click)="openProject(project.id)"
      >
        <div class="project-card-header">
          <div class="project-avatar">{{ project.name.charAt(0).toUpperCase() }}</div>
          <div class="project-actions">
            <button class="btn-icon delete" (click)="deleteProject(project.id, $event)" title="Delete">üóëÔ∏è</button>
          </div>
        </div>
        <h3 class="project-name">{{ project.name }}</h3>
        <p class="project-desc">{{ project.description || 'No description' }}</p>
        <div class="project-footer">
          <span class="task-badge">{{ project.taskCount }} task{{ project.taskCount !== 1 ? 's' : '' }}</span>
          <span class="created-at">{{ project.createdAt | date:'MMM d, y' }}</span>
        </div>
      </div>
    </div>
  </main>

  <!-- Create Modal -->
  <div class="modal-overlay" *ngIf="showCreateModal" (click)="showCreateModal = false">
    <div class="modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>New Project</h3>
        <button class="btn-close" (click)="showCreateModal = false">‚úï</button>
      </div>
      <form [formGroup]="createForm" (ngSubmit)="createProject()">
        <div class="form-group">
          <label>Project Name *</label>
          <input type="text" formControlName="name" placeholder="My Awesome Project" />
          <span class="error-text" *ngIf="createForm.get('name')?.invalid && createForm.get('name')?.touched">
            Name is required (min. 2 characters)
          </span>
        </div>
        <div class="form-group">
          <label>Description</label>
          <textarea formControlName="description" rows="3" placeholder="Project description..."></textarea>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn-secondary" (click)="showCreateModal = false">Cancel</button>
          <button type="submit" class="btn-primary" [disabled]="creating">
            {{ creating ? 'Creating...' : 'Create Project' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
